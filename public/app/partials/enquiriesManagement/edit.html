<!-- style -->
<style>
        #categories-list {
            margin-top: 20px;
            height: 300px;
            overflow: hidden;
            overflow-y: scroll;
            list-style: none;
            padding: 0px;
        }
    
        #categories-list li {
            padding: 10px 0px;
            border-bottom: 1px solid #e6e6e6;
        }
    
        #categories-list li input {
            display: inline-block!important;
            width: auto;
            float: right;
            margin-right: 20px;
            margin-top: 10px;
        }
        #productResult{
            height: 377px;
            display: block;
            overflow: scroll;
        }
        .plist{
            padding-top: 10px;
        padding-bottom: 10px;
        border-top: 1px solid #dfdfdf;
        background: #f8f8f8;
        }
        .pname{
            color: #515151;
            display: block;
        }
        .pcode{
            font-size: 14px;
        color: #ca671a;
        font-weight: 600;
        }
        .cartList label{
            font-size: 12px;
            font-weight: 600;
            color: #123d7a;
            display: block;
            border-bottom: 1px solid #e1e1e1;
            padding-bottom: 10px;
        }
        .cartList input{
            border:none;
            border-bottom:1.8px dashed #e1e1e1;
        }
        .cartList{
            height: 840px;
            overflow-y: scroll;
            overflow-x:hidden;
        }
        .cartList h4 {
            color: #b2b2b2;
            width: 300px;
            margin: 0 auto;
            display: block;
            margin-top: 40%;
        }
        .tb{
            border-top:1px solid red;
        }
        .totalCart small{
            display: block;
        font-size: 12px;
        font-weight: 600;
        color: #00bcd4;
        }
        .totalCart{
            font-size: 30px;
        font-weight: 600;
        color: #5b5b5b;
        }
        #delegatorWrap{
            position: absolute;
        top: 0;
        right: 0;
        width: 100%;
        height: 100%;
        background: #f3f3f3;
        opacity: 0.5;
        }
    </style>
    <link rel="stylesheet" type="text/css" href="/robust-assets/css/plugins/extensions/sweetalert.css">
    <!-- Main Content -->
    <section ng-controller="inquiryEdit">
        <div class="row">
                <div class="col-xl-12 col-lg-12 col-xs-12">
                        <div class="card">
                            <div class="card-body">
                                <div class="media">
                                    <div class="p-2 text-xs-center bg-cyan media-left media-middle">
                                        <i class="icon-briefcase font-large-2 white"></i>
                                    </div>
                                    <div class="p-2 media-body">
                                        <h4>Edit Inquiry</h4>
                                        <h5 class="text-bold-400">
                                        You can edit inquiry here, use the product search below to looking for product you want to add
                                        </h5>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- end -->   
        </div>
        <div class="row" ng-form="custForm">
            <div class="col-md-12">
                    <div class="card">
                            <div class="card-header">
                                    <h4 class="card-title">Customer Information</h4>
                                    <a class="heading-elements-toggle"><i class="icon-ellipsis font-medium-3"></i></a>
                                    <div class="heading-elements">
                                        <ul class="list-inline mb-0">
                                            <li><a data-action="collapse"><i class="icon-minus4"></i></a></li>
                                            <li><a data-action="expand"><i class="icon-expand2"></i></a></li>
                                        </ul>
                                    </div>
                                </div>
                            <div class="card-body collapse in">
                                <div class="card-block">
                                        <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label>Customer Email</label>
                                                        <input type="email" 
                                                        class="form-control" placeholder="Customer Email" 
                                                        name="name" ng-model="inquiry.customerData.email" required
                                                        ng-model-options="{debounce:250}">
                                                    </div>
                                                    <div class="form-group">
                                                            <label>Customer Phone</label>
                                                            <input type="text" 
                                                            class="form-control" placeholder="+62 123123" 
                                                            name="name" ng-model="inquiry.customerData.phone" ng-model-options="{debounce:250}" required>
                                                        </div>
                                                    <div class="form-group">
                                                        <label>Customer Name</label>
                                                        <input type="text" 
                                                        class="form-control" placeholder="Customer Name" 
                                                        name="name" ng-model="inquiry.customerData.name" required>
                                                    </div>
                                                    
                                                    
                                                    <div class="form-group">
                                                            <label>Customer Type</label>
                                                            <select class="form-control" name="type" ng-model="inquiry.customerData.type"
                                                            ng-options="type.id as type.name for type in types">
                                                               
                                                            </select>
                                                    </div>
                                        </div>
                                        <div class="col-md-6" ng-if="inquiry.customerData.type!=0" >
                                                    <div class="form-group">
                                                        <label>Company Type</label>
                                                        <select class="form-control select2" 
                                                        name='company_type' 
                                                        ng-model="inquiry.customerData.company_type" 
                                                        ui-select2
                                                        ng-required="true"
                                                        required
                                                        data-placeholder="Please Select">
                                                        <option value=""></option> 
                                                        <option ng-repeat="ct in allCompanyType" value="{{ct.id}}">{{ct.name}}</option>
                                                        </select>
                                                    </div>
                                                    <div class="form-group">
                                                        <label>Company Name</label>
                                                        <input type="text" 
                                                        class="form-control" placeholder="Company Name" 
                                                        name="name" ng-model="inquiry.customerData.company_name" required>
                                                    </div>
                                                    <div class="form-group">
                                                        <label>Company Email</label>
                                                        <input type="email" 
                                                        class="form-control" placeholder="Company Email" 
                                                        name="name" ng-model="inquiry.customerData.company_email" required>
                                                    </div>
                                                    <div class="form-group">
                                                        <label>Company Phone</label>
                                                        <input type="text" 
                                                        class="form-control" placeholder="+62 123123" 
                                                        name="name" ng-model="inquiry.customerData.company_phone" required>
                                                    </div>
                                                    <div class="form-group">
                                                        <label>Company Address</label>
                                                        <textarea class="form-control" ng-model="inquiry.customerData.company_address"></textarea>
                                                    </div>
                                        </div>
                                </div>
                            </div>
                    </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-body collapse in cartList">
                        <div class="card-block" ng-form="cartForm">
                            <!-- Selected Item Goes Here -->
                            <div ng-repeat="cart in inquiry.cart" class="col-md-12 plist pl-0 pr-0 tb">
                                        <div class="col-md-12 pl-0 pr-0">
                                                <div class="col-md-4">
                                                        <div class="form-group">
                                                            <label>Product Name</label>
                                                            <strong class="pname">{{cart.name}}</strong>
                                                            <span class="pcode">[ {{cart.product_code}} ]</span>
                                                        </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <label>@ Price</label>
                                                        <input type='text'
                                                        ng-model="cart.price"
                                                        class="form-control"
                                                        type="text"
                                                        ng-currency
                                                        currency-symbol="{{generalSettings.currency}}"
                                                        fraction="0"
                                                        min="0"
                                                        hard-cap="true"
                                                        ng-blur="forceZero($index)"
                                                        >
                                                    </div>
                                                    <div class="form-group">
                                                            <label>Quantity</label>
                                                            <input type='text'
                                                            ng-model="cart.qty"
                                                            class="form-control"
                                                            type="text"
                                                            ng-currency
                                                            currency-symbol=""
                                                            fraction="0"
                                                            min="0"
                                                            hard-cap="true"
                                                            ng-blur="forceZero($index)"
                                                            >
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                        <div class="form-group">
                                                                <label>Shipping Expedition</label>
                                                                <input type="text"
                                                                class="form-control"
                                                                ng-model="cart.shipping_expedition"
                                                                placeholder="JNE, TIKI, ETC">
                                                        </div>
                                                        <div class="form-group">
                                                                <label>Shipping Cost</label>
                                                                <input type='text'
                                                                ng-model="cart.shipping_cost"
                                                                class="form-control"
                                                                type="text"
                                                                ng-currency
                                                                currency-symbol="{{generalSettings.currency}}"
                                                                fraction="0"
                                                                min="0"
                                                                hard-cap="true"
                                                                ng-blur="forceZero($index)"
                                                                >
                                                        </div>
                                                </div>
                                                <div class="clearfix"></div>            
                                        </div>
                                        <div class="col-md-12 pl-0 pr-0">
                                                <div class="col-md-6">
                                                        <div class="form-group">
                                                                <label>Sender Name</label>
                                                                <input type="text"
                                                                class="form-control"
                                                                ng-model="cart.sender_name"
                                                                placeholder="Put the sender name here"
                                                                >
                                                        </div>
                                                        <div class="form-group">
                                                                <label>Receiver Name</label>
                                                                <input type="text"
                                                                class="form-control"
                                                                ng-model="cart.receiver_name"
                                                                placeholder="Put the receiver name here"
                                                                >
                                                        </div>
                                                        <div class="form-group">
                                                                <label>Receiver Phone</label>
                                                                <input type="text"
                                                                class="form-control"
                                                                ng-model="cart.receiver_phone"
                                                                placeholder="Put the receiver phone number here"
                                                                >
                                                        </div>
                                                        <div class="form-group">
                                                                <label>Greetings</label>
                                                                <textarea 
                                                                class="form-control"
                                                                ng-model="cart.greetings"
                                                                placeholder="Greeting Message here">
                                                                </textarea>
                                                        </div>
                                                </div>
                                                <div class="col-md-6">
                                                        <div class="form-group">
                                                                <label>Shipping Address</label>
                                                                <textarea 
                                                                class="form-control"
                                                                ng-model="cart.shipping_address"
                                                                placeholder="Shipping address here"
                                                                rows="6"
                                                                style="overflow:hidden;">
                                                                </textarea>
                                                        </div>
                                                        <div class="form-group">
                                                                <label>Notes</label>
                                                                <textarea 
                                                                class="form-control"
                                                                ng-model="cart.notes"
                                                                placeholder="Notes"
                                                                rows="6"
                                                                style="overflow:hidden;">
                                                                </textarea>
                                                        </div>
                                                </div>
                                                <div class="clearfix"></div>
                                        </div>
                                        <div class="col-md-12 pl-0 pr-0">
                                                <!-- Field Nested for Country, Province, and City -->
                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        <label>Shipping Location</label>
                                                        <div class="row m-0">
                                                            <div class="col-md-4">
                                                                <select name="country"
                                                                ng-model="cart.country"
                                                                name="country" 
                                                                class="form-control nested"
                                                                ui-select2
                                                                data-placeholder="Select Country"
                                                                required
                                                                ng-required="true">
                                                                    <option value=""></option>
                                                                    <option ng-repeat="c in countries[$index]" value="{{c.id}}">{{c.name}}</option>
                                                                </select>
                                                            </div>
                                                            <div class="col-md-4">
                                                                    <select name="province"
                                                                    ng-model="cart.province"
                                                                    name="province" 
                                                                    class="form-control nested"
                                                                    ng-disabled="!provinces[$index]"
                                                                    ui-select2
                                                                    data-placeholder="Select Province"
                                                                    required
                                                                    ng-required="true">
                                                                        <option value=""></option>
                                                                        <option ng-repeat="p in provinces[$index]" value="{{p.id}}">{{p.name}}</option>
                                                                    </select>
                                                            </div>                                              
                                                            <div class="col-md-4">
                                                                    <select name="city"
                                                                    ng-model="cart.city"
                                                                    name="province" 
                                                                    class="form-control nested select2"
                                                                    required
                                                                    ng-disabled="!cities[$index]"
                                                                    ui-select2
                                                                    ng-required="true"
                                                                    data-placeholder="Select City"
                                                                    >
                                                                        <option value="" disabled></option>
                                                                        <option ng-repeat="c in cities[$index]" value="{{c.id}}">{{c.name}}</option>
                                                                    </select>
                                                            </div>
                                                            <div class="clearfix"></div>
                                                        </div>    
                                                    </div>
                                                    <div class="form-group">
                                                        <label>Date Time</label>
                                                        <div moment-picker="cart.date_time"
                                                            format="YYYY-MM-DD HH:mm:ss"
                                                            min-view="year"
                                                            max-view="hour"
                                                            today="true">
                                                            <span class="input-group-addon">
                                                                    <i class="octicon octicon-clock"></i>
                                                                </span>
                                                                <input class="form-control"
                                                                       placeholder="Select Date & time"
                                                                       ng-model="cart.date_time"
                                                                       ng-model-options="{ updateOn: 'blur' }">
                                                       </div>
                                                    </div>
                                                    
                                                </div>
                                               
                                            </div>
                                            
                                        <div class="col-md-12 pl-0 pr-0">
                                                <div class="col-md-8">
                                                    <div class="form-group">
                                                        <label>Subtotal</label>
                                                        {{currencyFormat((cart.subtotal))}}
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                        <div class="form-group">
                                                                <label>Action</label>
                                                                <a href="javascript:void()"
                                                                class="btn btn-block btn-square btn-danger"
                                                                ng-click="removeCart($index)">
                                                                    Delete
                                                                </a>
                                                        </div>
                                                </div>
                                                
                                        </div>
                                        <div class="clearfix"></div>
                            </div>
                            <h4 ng-show="inquiry.cart.length<1">Please Add Something</h4>
                        <div id='delegatorWrap' ng-show="delegator"></div>
                            <div class="clearfix"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h4 class="card-title totalCart"><small>Total:</small> {{currencyFormat(inquiry.total)}}</h4>
                        </div>
                    </div>
                    <div class="card">
                            <div class="card-body">
                                <div class="card-block" ng-form="salesForm">
                                    <div class="form-group">
                                        <label>Sales From : </label>
                                        <select class="form-control"
                                        ng-model="inquiry.sales_from"
                                        ng-options="from as from for from in sales_from"
                                        required>
                                        <option value="">Please Select</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                            <label>Website : </label>
                                            <select class="form-control"
                                            ng-model="inquiry.website"
                                            ng-options="website.id as website.name for website in websites"
                                            required>
                                            <option value="">Please Select</option>
                                            </select>
                                        </div>
                                </div>
                            </div>
                        </div>
                        
                    <div class="card">
                            <div class="card-body collapse in">
                                <div class="card-block card-dashboard">
                                        <fieldset class="form-group position-relative has-icon-left">
                                                <input 
                                                type="text" class="form-control"  
                                                ng-model-options="{debounce: 200}"
                                                placeholder="You can type [product name] or [product code] or [product description]"
                                                ng-model="searchText">
                                                <div class="form-control-position">
                                                    <i class="icon-search primary"></i>
                                                </div>
                                        </fieldset>
                                </div>
                                <div id="productResult">
                                        <div 
                                        infinite-scroll='loadMore()' infinite-scroll-disabled='ajax.busy || ajax.finished'
                                        infinite-scroll-distance='1'
                                        infinite-scroll-parent='true'
                                        >
                                            <div ng-repeat="product in ajax.items" class="col-md-12 plist">
                                                <div class="col-md-2">
                                                    <img src="{{product.image}}" style="width:100%;">
                                                </div>
                                                <div class="col-md-4">
                                                    <strong class="pname">{{product.name}}</strong>
                                                    <span class="pcode">[ {{product.product_code}} ]</span>
                                                </div>
                                                <div class="col-md-4">
                                                    <strong class="pprice">
                                                        {{currencyFormat(product.price)}}
                                                    </strong>
                                                </div>
                                                <div class="col-md-2">
                                                    <a href="javascript:void();" 
                                                        class="btn btn-success btn-square btn-block"
                                                        ng-click="addToCart(ajax.items[$index])">
                                                        <i class="icon-plus font-medium-3"></i>
                                                    </a>
                                                </div>
                                                <div class="clearfix"></div>
                                            </div>
                                            <div class="clearfix"></div>
                                        </div>
                                </div>
                            </div>
                    </div>
            </div>
        </div>
        <!-- Submit Button -->
        <div class="row">
            <div class="col-md-12">
                <button 
                ng-disabled="salesForm.$invalid || cartForm.$invalid || custForm.$invalid || inquiry.cart.length<1" 
                class="btn btn-square btn-block btn-success"
                ng-click="saveInquiry()"><i class="icon-open"
                ></i>&nbsp;&nbsp;SAVE INQUIRY</button>
            </div>
        </div>
        
        
    </section>
    
    <!-- End Main Content -->
    <!-- INCLUDE JS -->
    <script src="/robust-assets/js/plugins/extensions/sweetalert.min.js" type="text/javascript"></script>
    <script src="/app/controller/enquiriesManagement/inquiryEdit.js" type="text/javascript"></script>
    <!-- END INCLUDE JS -->
    