$(window).on("load",function(){function a(a,b){var c=(a.endAngle-a.startAngle)/a.value;return d3.range(0,a.value,b).map(function(b){return{value:b,angle:b*c+a.startAngle}})}var b=d3.select("#chord-diagram"),c=600,d=600,e=d3.formatPrefix(",.0",1e3),f=[[11975,5871,8916,2868],[1951,10048,2060,6171],[8010,16145,8090,8045],[1013,990,940,6907]],g=d3.scale.ordinal().domain(d3.range(4)).range(["#99B898","#FECEA8","#FF847C","#E84A5F"]),h=b.append("svg"),i=h,j=.5*Math.min(c,d)-40,k=j-30,l=d3.chord().padAngle(.05).sortSubgroups(d3.descending),m=d3.svg.arc().innerRadius(k).outerRadius(j),n=d3.ribbon().radius(k),o=i.append("g").attr("transform","translate("+c/2+","+d/2+")").datum(l(f)),p=o.append("g").attr("class","groups").selectAll("g").data(function(a){return a.groups}).enter().append("g");p.append("path").style("fill",function(a){return g(a.index)}).style("stroke",function(a){return d3.rgb(g(a.index)).darker()}).attr("d",m);var q=p.selectAll(".group-tick").data(function(b){return a(b,1e3)}).enter().append("g").attr("class","group-tick").attr("transform",function(a){return"rotate("+(180*a.angle/Math.PI-90)+") translate("+j+",0)"});q.append("line").attr("x2",6),q.filter(function(a){return a.value%5e3===0}).append("text").attr("x",8).attr("dy",".35em").attr("transform",function(a){return a.angle>Math.PI?"rotate(180) translate(-16)":null}).style("text-anchor",function(a){return a.angle>Math.PI?"end":null}).text(function(a){return e(a.value)}),o.append("g").attr("class","ribbons").selectAll("path").data(function(a){return a}).enter().append("path").attr("d",n).style("fill",function(a){return g(a.target.index)}).style("stroke",function(a){return d3.rgb(g(a.target.index)).darker()})});